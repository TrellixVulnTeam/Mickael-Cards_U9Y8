{"ast":null,"code":"var _jsxFileName = \"/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/ListUI.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { List, message, Avatar, Spin, Modal, Select, Button } from 'antd';\nimport CreatableSelect from 'react-select/creatable';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport EditableForm from './EditableForm';\nimport PopoverUI from './PopoverUI';\nimport ModalUI from './ModalUI';\nimport './list.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst ListUI = ({\n  data,\n  reload\n}) => {\n  _s();\n\n  const [visible, setVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [reloadTrick, setReloadTrick] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [create, setCreate] = useState(false);\n  const [newCategory, setNewCategory] = useState(null);\n  const [value, setValue] = useState(selectedItem && selectedItem.transaction_details.category);\n  useEffect(() => {\n    console.log('use effect select ', value);\n    fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories').then(response => response.json()).then(data => {\n      setCategories(data);\n    }); // console.log(count)\n  }, [value]); // if you add count, only run if count changes.\n\n  let selectorOptions = categories.map(c => {\n    return {\n      label: c.name,\n      value: c.name\n    };\n  });\n  console.log('data data ', selectorOptions);\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setVisible(false);\n    console.log('resect select');\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  const onTransactionClick = item => {\n    console.log('ITEM ITEM ', item);\n    setSelectedItem(item);\n    setValue(item.transaction_details.category);\n    showModal();\n  };\n\n  const onFinish = (value, item) => {\n    handleOk();\n    onSubmitTag(value, item);\n  };\n\n  const reloadModal = () => {\n    console.log('RELOAD MODAL LIST UI');\n    handleOk();\n  };\n\n  const isCreate = value => {\n    setCreate(value);\n  };\n\n  const onType = value => {\n    setNewCategory(value);\n  };\n\n  function onBlur() {\n    console.log('blur');\n    reload();\n  }\n\n  function onFocus() {\n    console.log('focus');\n  }\n\n  function onSearch(val) {\n    const filteredCategories = categories.filter(category => {\n      return category.name.includes(val);\n    });\n\n    if (filteredCategories.length > 0) {} else {\n      // setOnCreate(true)\n      isCreate(true);\n      onType(val);\n    }\n  }\n\n  function filterOption(input, option) {\n    const result = option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    return result;\n  }\n\n  const onCreate = v => {\n    setLoading(true);\n    setDisabled(true);\n\n    if (v != null) {\n      fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"category\": v\n        })\n      }).then(response => response.json()).then(data => {\n        setLoading(false);\n        setDisabled(false);\n        setCategories(data);\n      });\n    }\n  };\n\n  const onSubmitTag = value => {\n    setValue(value.value);\n    console.log('VALUE VALUE ', value);\n    console.log('SELECTED ITEM ', selectedItem);\n    fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"category\": value.value\n      })\n    }).then(response => response.json()).then(data => {\n      reload();\n      handleOk();\n      setValue(''); // setVisible(false)\n      // reloadModal(value);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"demo-infinite-container\",\n    children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      initialLoad: false,\n      pageStart: 0,\n      useWindow: false,\n      loadMore: () => console.log('load more'),\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Transaction details\",\n        visible: visible,\n        onOk: handleOk,\n        onCancel: handleCancel,\n        children: selectedItem ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Transaction ID: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.uuid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Vendor: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.vendor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Category:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CreatableSelect, {\n              onChange: onSubmitTag,\n              options: selectorOptions,\n              className: \"select\",\n              onCreateOption: onCreate,\n              isLoading: loading,\n              isDisabled: disabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        dataSource: data,\n        renderItem: item => /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-tag\": \"test\",\n          onClick: () => onTransactionClick(item),\n          children: /*#__PURE__*/_jsxDEV(List.Item, {\n            data: item,\n            children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n              title: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: item.transaction_details.vendor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 26\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n              title: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: item.transaction_details.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 26\n              }, this),\n              description: item.transaction_details.tag\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [item.transaction_details.total, \" \\u20AA\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)]\n          }, item.transaction_details.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ListUI, \"D72Hh3ycF/vAc5dcVZNJZMEUJvk=\");\n\n_c = ListUI;\nexport default ListUI;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListUI\");","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/ListUI.js"],"names":["React","useState","useEffect","List","message","Avatar","Spin","Modal","Select","Button","CreatableSelect","InfiniteScroll","EditableForm","PopoverUI","ModalUI","Option","fakeDataUrl","ListUI","data","reload","visible","setVisible","loading","setLoading","disabled","setDisabled","selectedItem","setSelectedItem","category","setCategory","reloadTrick","setReloadTrick","categories","setCategories","create","setCreate","newCategory","setNewCategory","value","setValue","transaction_details","console","log","fetch","then","response","json","selectorOptions","map","c","label","name","showModal","handleOk","handleCancel","onTransactionClick","item","onFinish","onSubmitTag","reloadModal","isCreate","onType","onBlur","onFocus","onSearch","val","filteredCategories","filter","includes","length","filterOption","input","option","result","children","toLowerCase","indexOf","onCreate","v","method","headers","body","JSON","stringify","uuid","vendor","total","tag","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { List, message, Avatar, Spin, Modal, Select, Button } from 'antd';\nimport CreatableSelect from 'react-select/creatable';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport EditableForm from './EditableForm';\nimport PopoverUI from './PopoverUI';\nimport ModalUI from './ModalUI';\nimport './list.css'\n\nconst { Option } = Select;\n\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst ListUI = ({ data, reload }) => {\n\n  const [visible, setVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [reloadTrick, setReloadTrick] = useState(\"\");\n  const [categories, setCategories] = useState([])\n  const [create, setCreate] = useState(false)\n  const [newCategory, setNewCategory] = useState(null)\n  const [value, setValue] = useState(selectedItem && selectedItem.transaction_details.category)\n\n\n\n  useEffect(() => {\n    console.log('use effect select ', value)\n    fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories')\n      .then(response => response.json())\n      .then(data => { setCategories(data) });\n\n    // console.log(count)\n  }, [value]) // if you add count, only run if count changes.\n\n  let selectorOptions = categories.map( c => {\n    return {\n      label:c.name,\n      value:c.name\n    }\n  })\n\n  console.log('data data ', selectorOptions)\n  \n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setVisible(false);\n    console.log('resect select')\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  const onTransactionClick = (item) => {\n    console.log('ITEM ITEM ', item)\n    setSelectedItem(item);\n    setValue(item.transaction_details.category)\n    showModal()\n  }\n\n  const onFinish = (value, item) => {\n    handleOk()\n    onSubmitTag(value, item)\n  };\n\n  const reloadModal = () => {\n    console.log('RELOAD MODAL LIST UI')\n    handleOk()\n  };\n\n  const isCreate = (value) => {\n    setCreate(value)\n  }\n\n  const onType = (value) => {\n    setNewCategory(value)\n  }\n\n\n\n\n\n  function onBlur() {\n    console.log('blur')\n    reload()\n  }\n\n  function onFocus() {\n    console.log('focus')\n  }\n\n\n  function onSearch(val) {\n    const filteredCategories = categories.filter(category => {\n      return category.name.includes(val);\n    })\n    if (filteredCategories.length > 0) {\n\n\n    }\n    else {\n      // setOnCreate(true)\n      isCreate(true)\n      onType(val)\n    }\n  }\n\n  function filterOption(input, option) {\n    const result = option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    return result\n  }\n\n  const onCreate = (v) => {\n    setLoading(true);\n    setDisabled(true);\n    if (v != null) {\n      fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ \"category\": v })\n      })\n        .then(response => response.json())\n        .then(data => { \n          setLoading(false);\n          setDisabled(false);\n          setCategories(data) \n        });\n    }\n\n  }\n  const onSubmitTag = (value) => {\n    setValue(value.value)\n    console.log('VALUE VALUE ', value)\n    console.log('SELECTED ITEM ', selectedItem)\n    fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ \"category\": value.value })\n    })\n      .then(response => response.json())\n      .then(data => {\n        reload()\n        handleOk()\n        setValue('')\n        // setVisible(false)\n        // reloadModal(value);\n\n      });\n  }\n\n  return (\n    <div className=\"demo-infinite-container\">\n      <InfiniteScroll\n        initialLoad={false}\n        pageStart={0}\n        useWindow={false}\n        loadMore={() => console.log('load more')}\n      >\n        <Modal title={\"Transaction details\"} visible={visible} onOk={handleOk} onCancel={handleCancel}>\n          {selectedItem\n            ? <div className='modal'>\n              <div className='row'>     \n                <div>Transaction ID: </div>\n                <div>{selectedItem.transaction_details.uuid}</div>\n              </div>\n              <div className='row'>\n                <div>Vendor: </div>\n                <div>{selectedItem.transaction_details.vendor}</div>\n              </div>\n              <div className='row'>\n                <div>Category:</div>\n                {/* <SelectUI closeModal={closeModal} resetSelect={resetSelect} reload={reload} selectedItem={selectedItem} /> */}\n                {/* <Select\n                  showSearch\n                  style={{ width: 200 }}\n                  placeholder=\"Select a category\"\n                  optionFilterProp=\"children\"\n                  onChange={onSubmitTag}\n                  onBlur={onBlur}\n                  onFocus={onFocus}\n                  onSearch={onSearch}\n                  filterOption={(filterOption)}\n                  allowClear\n                  value={value}\n                >\n                  <Option value=\"all\">All</Option>\n                  {\n                    categories.map(c => (\n                      <Option key={c.uuid} value={c.name}>{c.name}</Option>\n                    ))\n                  }\n                  \n                </Select> */}\n                <CreatableSelect\n                  onChange={onSubmitTag}\n                  options={selectorOptions}\n                  className=\"select\"\n                  onCreateOption={onCreate}\n                  isLoading={loading}\n                  isDisabled={disabled}\n                />\n              </div>\n              <div className='row'>\n                <div>Total:</div>\n                <div>{selectedItem.transaction_details.total}</div>\n              </div>\n            </div>\n            : <div></div>\n          }\n        </Modal>\n        <List\n          dataSource={data}\n          renderItem={item => (\n            <div data-tag=\"test\" onClick={() => onTransactionClick(item)}>\n              <List.Item data={item} key={item.transaction_details.id}>\n                <List.Item.Meta\n                  title={<a><h2>{item.transaction_details.vendor}</h2></a>}\n\n                />\n                <List.Item.Meta\n                  title={<a><h2>{item.transaction_details.category}</h2></a>}\n                  description={item.transaction_details.tag}\n                />\n                <h2>{item.transaction_details.total} â‚ª</h2>\n\n\n              </List.Item>\n            </div>\n          )}\n        >\n        </List>\n      </InfiniteScroll>\n    </div>\n  );\n\n}\n\nexport default ListUI;"]},"metadata":{},"sourceType":"module"}
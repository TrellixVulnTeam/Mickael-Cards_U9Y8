{"ast":null,"code":"var _jsxFileName = \"/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/ListUI.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { List, message, Avatar, Spin, Modal, Select } from 'antd';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport EditableForm from './EditableForm';\nimport PopoverUI from './PopoverUI';\nimport ModalUI from './ModalUI';\nimport './list.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst ListUI = ({\n  data,\n  reload\n}) => {\n  _s();\n\n  const [visible, setVisible] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [reloadTrick, setReloadTrick] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [create, setCreate] = useState(false);\n  const [newCategory, setNewCategory] = useState(null);\n  const [value, setValue] = useState(selectedItem && selectedItem.transaction_details.category);\n  useEffect(() => {// console.log(count)\n  }, [selectedItem]); // if you add count, only run if count changes.\n\n  useEffect(() => {\n    console.log('use effect select ', value);\n    fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories').then(response => response.json()).then(data => {\n      setCategories(data);\n    }); // console.log(count)\n  }, [value]); // if you add count, only run if count changes.\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setVisible(false);\n    console.log('resect select');\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  const onTransactionClick = item => {\n    console.log('ITEM ITEM ', item);\n    setSelectedItem(item);\n    showModal();\n  };\n\n  const onFinish = (value, item) => {\n    handleOk();\n    onSubmitTag(value, item);\n  };\n\n  const reloadModal = () => {\n    console.log('RELOAD MODAL LIST UI');\n    handleOk();\n  };\n\n  const isCreate = value => {\n    setCreate(value);\n  };\n\n  const onType = value => {\n    setNewCategory(value);\n  };\n\n  function onBlur() {\n    console.log('blur');\n    reload();\n  }\n\n  function onFocus() {\n    console.log('focus');\n  }\n\n  function onSearch(val) {\n    const filteredCategories = categories.filter(category => {\n      return category.name.includes(val);\n    });\n\n    if (filteredCategories.length > 0) {} else {\n      // setOnCreate(true)\n      isCreate(true);\n      onType(val);\n    }\n  }\n\n  function filterOption(input, option) {\n    const result = option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    return result;\n  }\n\n  const onCreate = () => {\n    if (newCategory != null) {\n      fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"category\": newCategory\n        })\n      }).then(response => response.json()).then(data => {\n        setCategories(data);\n      });\n    }\n\n    console.log('click');\n    setCreate(false);\n  };\n\n  const onSubmitTag = value => {\n    setValue(value);\n    console.log('VALUE VALUE ', value);\n    console.log('SELECTED ITEM ', selectedItem);\n    fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"category\": value\n      })\n    }).then(response => response.json()).then(data => {\n      reload();\n      handleOk();\n      setValue(''); // setVisible(false)\n      // reloadModal(value);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"demo-infinite-container\",\n    children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      initialLoad: false,\n      pageStart: 0,\n      useWindow: false,\n      loadMore: () => console.log('load more'),\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Transaction details\",\n        visible: visible,\n        onOk: handleOk,\n        onCancel: handleCancel,\n        children: selectedItem ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Transaction ID : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.uuid\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Vendor: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.vendor\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              showSearch: true,\n              style: {\n                width: 200\n              },\n              placeholder: \"Select a category\",\n              optionFilterProp: \"children\",\n              onChange: onSubmitTag,\n              onBlur: onBlur,\n              onFocus: onFocus,\n              onSearch: onSearch,\n              filterOption: filterOption,\n              allowClear: true,\n              value: value,\n              children: [/*#__PURE__*/_jsxDEV(Option, {\n                value: \"all\",\n                children: \"All\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 15\n              }, this), categories.map(c => /*#__PURE__*/_jsxDEV(Option, {\n                value: c.name,\n                children: c.name\n              }, c.uuid, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: selectedItem.transaction_details.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        dataSource: data,\n        renderItem: item => /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-tag\": \"test\",\n          onClick: () => onTransactionClick(item),\n          children: /*#__PURE__*/_jsxDEV(List.Item, {\n            data: item,\n            children: [/*#__PURE__*/_jsxDEV(List.Item.Meta, {\n              title: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: item.transaction_details.vendor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 26\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n              title: /*#__PURE__*/_jsxDEV(\"a\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: item.transaction_details.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 26\n              }, this),\n              description: item.transaction_details.tag\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [item.transaction_details.total, \" \\u20AA\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 17\n            }, this)]\n          }, item.transaction_details.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 7\n  }, this);\n};\n\n_s(ListUI, \"nJmIi5GNYVT0HBG+JJBmf86S8ms=\");\n\n_c = ListUI;\nexport default ListUI;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListUI\");","map":{"version":3,"sources":["/Users/mickaelzana/Desktop/backstage/cards/demo-front/src/components/ListUI.js"],"names":["React","useState","useEffect","List","message","Avatar","Spin","Modal","Select","InfiniteScroll","EditableForm","PopoverUI","ModalUI","Option","fakeDataUrl","ListUI","data","reload","visible","setVisible","selectedItem","setSelectedItem","category","setCategory","reloadTrick","setReloadTrick","categories","setCategories","create","setCreate","newCategory","setNewCategory","value","setValue","transaction_details","console","log","fetch","then","response","json","showModal","handleOk","handleCancel","onTransactionClick","item","onFinish","onSubmitTag","reloadModal","isCreate","onType","onBlur","onFocus","onSearch","val","filteredCategories","filter","name","includes","length","filterOption","input","option","result","children","toLowerCase","indexOf","onCreate","method","headers","body","JSON","stringify","uuid","vendor","width","map","c","total","tag","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { List, message, Avatar, Spin, Modal, Select} from 'antd';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport EditableForm from './EditableForm';\nimport PopoverUI from './PopoverUI';\nimport ModalUI from './ModalUI';\nimport './list.css'\n\nconst { Option } = Select;\n\nconst fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nconst ListUI = ({data, reload}) => {\n\n  const [visible, setVisible] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [reloadTrick, setReloadTrick] = useState(\"\");\n  const [categories, setCategories] = useState([])\n  const [create, setCreate] = useState(false)\n  const [newCategory, setNewCategory] = useState(null)\n  const [value, setValue] = useState(selectedItem && selectedItem.transaction_details.category)\n\n  useEffect(() => {\n\n    // console.log(count)\n  }, [selectedItem]) // if you add count, only run if count changes.\n\n  useEffect(() => {\n    console.log('use effect select ', value)\n    fetch('https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories')\n      .then(response => response.json())\n      .then(data => { setCategories(data) });\n\n    // console.log(count)\n  }, [value]) // if you add count, only run if count changes.\n  \n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setVisible(false);\n    console.log('resect select')\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  const onTransactionClick = (item) => {\n    console.log('ITEM ITEM ' , item)\n    setSelectedItem(item);\n    showModal()\n  }\n\n  const onFinish = (value, item) => {\n    handleOk()\n    onSubmitTag(value, item)\n  };\n  \n  const reloadModal = () => {\n   console.log('RELOAD MODAL LIST UI')\n   handleOk()\n  };\n\n  const isCreate = (value) => {\n    setCreate(value)\n  }\n  \n  const onType = (value) => {\n    setNewCategory(value)\n  }\n  \n\n  \n\n  \n    function onBlur() {\n      console.log('blur')\n      reload()\n    }\n  \n    function onFocus() {\n      console.log('focus')\n    }\n  \n  \n    function onSearch(val) {\n      const filteredCategories = categories.filter(category =>{\n        return category.name.includes(val);\n      })\n      if(filteredCategories.length > 0){\n       \n  \n      }\n      else{\n        // setOnCreate(true)\n        isCreate(true)\n        onType(val)\n      }\n    }\n  \n    function filterOption(input, option){\n      const result = option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0 ;\n      return result\n    }\n  \n    const onCreate = () => {\n      if (newCategory != null) {\n          fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/categories`, {\n              method: 'POST',\n              headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({ \"category\": newCategory })\n          })\n              .then(response => response.json())\n              .then(data => { setCategories(data) });\n      }\n      console.log('click')\n      setCreate(false);\n  }\n  const onSubmitTag = (value) => {\n    setValue(value)\n    console.log('VALUE VALUE ', value)\n    console.log('SELECTED ITEM ', selectedItem)\n    fetch(`https://2eh1oighrk.execute-api.eu-west-1.amazonaws.com/dev/transactions/${selectedItem.transaction_details.uuid}`, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body:JSON.stringify({\"category\":value})\n    })\n    .then(response => response.json())\n    .then(data => { \n      reload() \n      handleOk()\n      setValue('')\n      // setVisible(false)\n      // reloadModal(value);\n      \n    });\n  }\n\n    return ( \n      <div className=\"demo-infinite-container\">\n        <InfiniteScroll\n          initialLoad={false}\n          pageStart={0}\n          useWindow={false}\n          loadMore={() => console.log('load more')}\n        >\n              <Modal title={\"Transaction details\"} visible={visible} onOk={handleOk} onCancel={handleCancel}>\n      {selectedItem\n        ? <div className='modal'>\n          <div className='row'>\n            <div>Transaction ID : </div>\n            <div>{selectedItem.transaction_details.uuid}</div>\n          </div>\n          <div className='row'>\n            <div>Vendor: </div>\n            <div>{selectedItem.transaction_details.vendor}</div>\n          </div>\n          <div className='row'>\n            <div>Category</div>\n            {/* <SelectUI closeModal={closeModal} resetSelect={resetSelect} reload={reload} selectedItem={selectedItem} /> */}\n            <Select\n              showSearch\n              style={{ width: 200 }}\n              placeholder=\"Select a category\"\n              optionFilterProp=\"children\"\n              onChange={onSubmitTag}\n              onBlur={onBlur}\n              onFocus={onFocus}\n              onSearch={onSearch}\n              filterOption={(filterOption)}\n              allowClear\n              value={value}\n            >\n              <Option value=\"all\">All</Option>\n              {\n                categories.map(c => (\n                  <Option key={c.uuid} value={c.name}>{c.name}</Option>\n                ))\n              }\n            </Select>\n          </div>\n          <div className='row'>\n            <div>Total</div>\n            <div>{selectedItem.transaction_details.total}</div>\n          </div>\n        </div>\n        : <div></div>\n      }\n    </Modal>\n          <List\n            dataSource={data}\n            renderItem={item => (\n              <div data-tag=\"test\" onClick={() => onTransactionClick(item)}>\n                <List.Item data={item} key={item.transaction_details.id}>\n                <List.Item.Meta\n                  title={<a><h2>{item.transaction_details.vendor}</h2></a>}\n                  \n                />\n                <List.Item.Meta\n                  title={<a><h2>{item.transaction_details.category}</h2></a>}\n                  description={item.transaction_details.tag}\n                />\n                <h2>{item.transaction_details.total} â‚ª</h2>\n             \n                \n              </List.Item>\n              </div>\n            )}\n          >\n          </List>\n        </InfiniteScroll>\n      </div>\n    );\n  \n}\n\nexport default ListUI ;"]},"metadata":{},"sourceType":"module"}